experimentLayout = ExperimentStructureGraph();

instanceNameFun = struct_with_handle;
build_relative_node = @(nodeName,varargin) relativeNode(nodeName,instanceNameFun.ms.(nodeName)(varargin{:}));


nodeName = 'number_of_classes';
nodeAbrev = 'C';
instanceNameFun.ms.(nodeName) = @(noc) sprintf('%s%d',nodeAbrev,noc);

nodeName = 'dimension';
nodeAbrev = 'dim';
instanceNameFun.ms.(nodeName) = @(dim) sprintf('%s%d',nodeAbrev,dim);

nodeName = 'number_of_negative_dictionary_atoms';
nodeAbrev = 'K0_';
instanceNameFun.ms.(nodeName) = @(K0) sprintf('%s%d',nodeAbrev,K0);

nodeName = 'K';
nodeAbrev = 'K';
instanceNameFun.ms.(nodeName) = @(Ki) [sprintf('%s',nodeAbrev),sprintf('_%d_',nodeAbrev,Ki)];

nodeName = 'dictionary';
nodeAbrev = 'd';
instanceNameFun.ms.(nodeName) = @(id) sprintf('%s_%s',nodeAbrev,id);

nodeName = 'imbalance_ratio';
nodeAbrev = 'ir';
instanceNameFun.ms.(nodeName) = @(ir) sprintf('%s%d',nodeAbrev,ir*100);

nodeName = 'number_of_bags';
nodeAbrev = 'nob';
instanceNameFun.ms.(nodeName) = @(nob,dt) sprintf('%s%d_%s',nodeAbrev,nob,dt);

nodeName = 'bag_labels';
nodeAbrev = 'bl';
instanceNameFun.ms.(nodeName) = @(id,dt) sprintf('%s_%s_%s',nodeAbrev,id,dt);

nodeName = 'instances_per_bag';
nodeAbrev = 'ipg';
instanceNameFun.ms.(nodeName) = @(ipg) sprintf('%s%d',nodeAbrev,ipg);

nodeName = 'witness_rate';
nodeAbrev = 'wr';
instanceNameFun.ms.(nodeName) = @(wr) [sprintf('%s',nodeAbrev),sprintf('_%d_',wr*100)];

nodeName = 'instance_labels';
nodeAbrev = 'il';
instanceNameFun.ms.(nodeName) = @(id,dt) sprintf('%s_%s_%s',nodeAbrev,id,dt);

nodeName = 'gen_sparsity_level';
nodeAbrev = 'gL';
instanceNameFun.ms.(nodeName) = @(L) sprintf('%s%d',nodeAbrev,L);

nodeName = 'Li';
nodeAbrev = 'Li';
instanceNameFun.ms.(nodeName) = @(Li) [sprintf('%s',nodeAbrev),sprintf('_%d_',Li)];

nodeName = 'coef';
nodeAbrev = 'coef';
instanceNameFun.ms.(nodeName) = @(id,dt) sprintf('%s_%s_%s',nodeAbrev,id,dt);

nodeName = 'data';
nodeAbrev = 'data';
instanceNameFun.ms.(nodeName) = @(id,dt) sprintf('%s_%s_%s',nodeAbrev,id,dt);

nodeName = 'DL_sparsity_level';
nodeAbrev = 'DL_L';
instanceNameFun.ms.(nodeName) = @(dl_L) sprintf('%s%d',nodeAbrev,dl_L);

nodeName = 'DL_number_of_iterations';
nodeAbrev = 'iterNum';
instanceNameFun.ms.(nodeName) = @(iterNum) sprintf('%s%d',nodeAbrev,iterNum);

nodeName = 'UDL_dictionary_size';
nodeAbrev = 'UDL_K';
instanceNameFun.ms.(nodeName) = @(udl_K) sprintf('%s%d',nodeAbrev,udl_K);

nodeName = 'learned_coef_sparsity_level';
nodeAbrev = 'LC_L';
instanceNameFun.ms.(nodeName) = @(lc_L) sprintf('%s%d',nodeAbrev,lc_L);

nodeName = 'learned_coef';
nodeAbrev = 'LC';
instanceNameFun.ms.(nodeName) = @(id,varargin) learned_coef_name_fun(nodeAbrev,id,varargin{:});

nodeName = 'PCA_normalize';
nodeAbrev = 'PCA_norm';
instanceNameFun.ms.(nodeName) = @(PCA_normalize) sprintf('%s%d',nodeAbrev,PCA_normalize);

nodeName = 'data_mean_and_normalization_factor';
instanceNameFun.ms.(nodeName) = @(id) sprintf('data_mean_%s',id);

nodeName = 'SDL_negative_dictionary_size';
nodeAbrev = 'SDL_nnoa';
instanceNameFun.ms.(nodeName) = @(SDL_neg_K) sprintf('%s%d',nodeAbrev,SDL_neg_K);

nodeName = 'SDL_total_dictionary_size';
nodeAbrev = 'SDL_noa';
instanceNameFun.ms.(nodeName) = @(SDL_K) sprintf('%s%d',nodeAbrev,SDL_K);

nodeName = 'SDL_negative_sparsity_level';
nodeAbrev = 'SDL_nL';
instanceNameFun.ms.(nodeName) = @(nL) sprintf('%s%d',nodeAbrev,nL);

nodeName = 'SDL_negative_number_of_iterations';
nodeAbrev = 'SDL_neg_iternum';
instanceNameFun.ms.(nodeName) = @(iter) sprintf('%s%d',nodeAbrev,iter);

nodeName = 'SDL_positive_number_of_iterations';
nodeAbrev = 'SDL_pos_iternum';
instanceNameFun.ms.(nodeName) = @(iter) sprintf('%s%d',nodeAbrev,iter);

nodeName = 'SDL_positive_sparsity_level';
nodeAbrev = 'SDL_pL';
instanceNameFun.ms.(nodeName) = @(pL) sprintf('%s%d',nodeAbrev,pL);

nodeName = 'class';
nodeAbrev = 'class';
instanceNameFun.ms.(nodeName) = @(c) sprintf('%s%d',nodeAbrev,c);










